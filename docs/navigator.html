---

title: Navigator

keywords: fastai
sidebar: home_sidebar

summary: "CNN viewer and navigator"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_navigator.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_row" class="doc_header"><code>get_row</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_row</code>(<strong><code>l</code></strong>, <strong><code>m</code></strong>)</p>
</blockquote>
<p>Construct dataframe row from <code>l</code> (Learner.named_modules() layer) and <code>m</code> (model)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_model" class="doc_header"><code>find_model</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L98" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_model</code>(<strong><code>n</code></strong>)</p>
</blockquote>
<p>Returns tuple of model type and name (e.g. ('resnet', 'resnet50')) given <code>n</code>, the number of named_modules in Learner.model.named_modules()</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">find_model</span><span class="p">(</span><span class="mi">79</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;resnet&#39;</span><span class="p">,</span> <span class="s1">&#39;resnet18&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_infos" class="doc_header"><code>split_infos</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_infos</code>(<strong><code>infos</code></strong>)</p>
</blockquote>
<p>Split the rows of infos (learner.summary()) into separate rows</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_inp_sz" class="doc_header"><code>get_inp_sz</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L112" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_inp_sz</code>(<strong><code>infos</code></strong>)</p>
</blockquote>
<p>Slice first row of <code>infos</code> to give string representation of model input sizes</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">get_inp_sz</span><span class="p">([</span><span class="s2">&quot;Sequential (Input shape: [&#39;128 x 3 x 224 x 224&#39;])&quot;</span><span class="p">]),</span> <span class="s2">&quot;128 x 3 x 224 x 224&quot;</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="infos_to_gen" class="doc_header"><code>infos_to_gen</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L119" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>infos_to_gen</code>(<strong><code>infos</code></strong>)</p>
</blockquote>
<p>Slice the remaining rows of <code>infos</code> to give the layers, <code>m</code>, output dimensions <code>o</code>, parameters <code>p</code> and trainable <code>t</code> of each layer and return (m,o,p,t) for all layers in a generator</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">test_summary</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_test_vars</span><span class="p">()</span>
<span class="n">gen</span> <span class="o">=</span> <span class="n">infos_to_gen</span><span class="p">(</span><span class="n">test_summary</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Conv2d&#39;</span><span class="p">,</span> <span class="s1">&#39;[128 x 64 x 112 x 11]&#39;</span><span class="p">,</span> <span class="s1">&#39;9,408&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CNDF" class="doc_header"><code>class</code> <code>CNDF</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L130" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CNDF</code>(<strong><code>learner</code></strong>:<code>any</code>, <strong><code>learner_summary</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Compile information from fastai <code>Learner.model</code> and 'layer_info(Learner)` into a dataframe</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>CNDF class builds a dataframe using a fastai Learner and the output of Learner.summary() method. The resulting dataframe, called a CNDF dataframe, combines information from both sources and represents both the structure and information of Learner.model.</p>
<p>CNDF is a parent class of ConvNav and a CNDF dataframe is automatically built when a new ConvNav object is instantiated and for most use cases CNDF dataframes should be built this way. However, if there is a need to build a CNDF dataframe in isolation use:</p>

<pre><code>cndf = CNDF(Learner, Learner.summary())</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.supported_models" class="doc_header"><code>CNDF.supported_models</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L264" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CNDF.supported_models</code>()</p>
</blockquote>
<p>Prints list of supported models from 'models' list (imported from models)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.cndf" class="doc_header"><code>CNDF.cndf</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Returns a ConvNav dataframe</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.batch_size" class="doc_header"><code>CNDF.batch_size</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Returns the batch size of the current learner</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.input_sizes" class="doc_header"><code>CNDF.input_sizes</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Returns the sizes (dimensions bs, ch, h, w) of the model)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.output_dimensions" class="doc_header"><code>CNDF.output_dimensions</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Returns output dimensions of model (bs, classes)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDF.model_info" class="doc_header"><code>CNDF.model_info</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Return an info string derived from<code>Learner.model</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_learner</span><span class="p">,</span> <span class="n">test_summary</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_test_vars</span><span class="p">()</span>
<span class="n">cndf_test</span> <span class="o">=</span> <span class="n">CNDF</span><span class="p">(</span><span class="n">test_learner</span><span class="p">,</span> <span class="n">test_summary</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">_cndf</span><span class="p">),</span> <span class="n">DataFrame</span><span class="p">)</span>   
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">_cndf</span><span class="p">),</span> <span class="mi">79</span><span class="p">)</span>             <span class="c1"># rows</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">_cndf</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="mi">22</span><span class="p">)</span>     <span class="c1"># columns</span>
<span class="k">del</span><span class="p">(</span><span class="n">cndf_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CNDFView" class="doc_header"><code>class</code> <code>CNDFView</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L273" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CNDFView</code>()</p>
</blockquote>
<p>Class to view a CNDF dataframe</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDFView.view" class="doc_header"><code>CNDFView.view</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L291" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CNDFView.view</code>(<strong><code>df</code></strong>=<em><code>None</code></em>, <strong><code>verbose</code></strong>=<em><code>3</code></em>, <strong><code>tight</code></strong>=<em><code>True</code></em>, <strong><code>truncate</code></strong>=<em><code>0</code></em>, <strong><code>align_cols</code></strong>=<em><code>'left'</code></em>, <strong><code>top</code></strong>=<em><code>False</code></em>, <strong><code>show</code></strong>=<em><code>True</code></em>, <strong><code>return_df</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Display dataframe <code>df</code> with optional arguments and styling</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><code>df</code>: CNDF dataframe to be displayed. Displays instance dataframe <code>self. _cndf</code> if None (default)</li>
<li><code>verbose</code>: 1 = Index and Layer_name columns only; 2 = Model structure; 3 = Model Structure and layer_info (output dims, params and frozen/unfrozen) (default);  4 = fill in container columns with layer_info; 5 = expose hidden columns.</li>
<li><code>tight</code>: False = normal row spacing; True = tight layout with minimal space between rows (best for large models with many rows to display). The default is True but dataframes with fewer than 10 rows are automatically displayed with normal spacing.</li>
<li><code>truncate</code>: truncate number displayed columns by integer value between -10 and 10. 0 = default. Negative values reveal hidden columns. Overidden when the verbose argument is set to a non-default setting.</li>
<li><code>align_cols</code>: 'left' (default); 'right' alignment of column data</li>
<li><code>top</code>: display first 10 rows only followed by a count of undisplayed rows</li>
<li><code>show</code>: True (default)/False show/hide cell output.</li>
<li><code>return_df</code>: return the formatted df to the caller if True. False returns None (default). </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CNDFSearch" class="doc_header"><code>class</code> <code>CNDFSearch</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L329" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CNDFSearch</code>()</p>
</blockquote>
<p>Class to search a CNDF dataframe, display the results in a dataframe and returns matching module object(s)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="CNDFSearch.search" class="doc_header"><code>CNDFSearch.search</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L369" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>CNDFSearch.search</code>(<strong><code>searchterm</code></strong>, <strong><code>df</code></strong>=<em><code>None</code></em>, <strong><code>exact</code></strong>=<em><code>True</code></em>, <strong><code>show</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Search 'df<code>for single or combination of modules and layers. If df = None, searches instance dataframe</code>self._cndf` (default)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>Searchterm</code> can be:</p>
<ul>
<li><code>int</code> : the module with Index number <code>int</code> is returned</li>
<li><code>float</code>: module(s) where <code>str(float)</code> matches the Layer_name are returned</li>
<li><code>str</code>: module(s) with <code>str</code> in one of 'Layer_name', 'Torch_class', 'Division', 'Module', 'Block', 'Layer_description' are returned. Columns are searched in this order with the search ending with the first column to make a match/matches. </li>
<li><code>dict</code>, e.g. {'col', 'str'} matches <code>str</code> in column <code>col</code> </li>
</ul>
<p>Searchterms can also be a combined as follows:</p>
<ul>
<li><code>[101, 102, 105]</code> logical OR of rows matching indexes <code>101</code>, <code>102</code> plus <code>103</code></li>
<li><code>('0.5', 'conv2d')</code> logical AND of rows matching <code>0.5</code> in Layer_name and <code>conv2d</code> in <code>Layer_description</code></li>
<li><code>{{'col1', 'str1'}, {'col2', 'str2'}}</code> logical OR of matches <code>str1</code> in <code>col1</code> plus <code>str2</code> in <code>col</code>'.</li>
</ul>
<p>Return only exact matches between searchterm and column entry with exact = True (default).
<br /></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">test_df</span> <span class="o">=</span> <span class="n">get_test_vars</span><span class="p">()</span>
<span class="n">test_df</span><span class="p">[</span><span class="s1">&#39;lyr_obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">cndf_test</span> <span class="o">=</span> <span class="n">CNDFSearch</span><span class="p">()</span>

<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;0.6.1.conv2&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s1">&#39;Module_name&#39;</span><span class="p">:</span> <span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="s1">&#39;Layer_description&#39;</span><span class="p">:</span><span class="s1">&#39;Conv2d&#39;</span><span class="p">},</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">([</span><span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5&#39;</span><span class="p">],</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span> <span class="mi">32</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cndf_test</span><span class="o">.</span><span class="n">search</span><span class="p">((</span><span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5&#39;</span><span class="p">),</span> <span class="n">df</span><span class="o">=</span><span class="n">test_df</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
<span class="k">del</span><span class="p">(</span><span class="n">cndf_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ConvNav" class="doc_header"><code>class</code> <code>ConvNav</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L416" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ConvNav</code>(<strong><code>learner</code></strong>, <strong><code>learner_summary</code></strong>) :: <a href="/fa_convnav/navigator#CNDF"><code>CNDF</code></a></p>
</blockquote>
<p>Class to view fastai supported CNNs, search and select module(s) and layer(s) for further investigation. Automatically builds a CNDF dataframe from Learner and Learner.summary()</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>cn = ConvNav(Learner, Learner.summary()</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_learner</span><span class="p">,</span> <span class="n">test_summary</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_test_vars</span><span class="p">()</span>
<span class="n">cn_test</span> <span class="o">=</span> <span class="n">ConvNav</span><span class="p">(</span><span class="n">test_learner</span><span class="p">,</span> <span class="n">test_summary</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">cn_test</span><span class="o">.</span><span class="n">_cndf</span><span class="p">),</span> <span class="n">DataFrame</span><span class="p">)</span>    
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cn_test</span><span class="o">.</span><span class="n">_cndf</span><span class="p">),</span> <span class="mi">79</span><span class="p">)</span>             <span class="c1"># rows</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cn_test</span><span class="o">.</span><span class="n">_cndf</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="mi">22</span><span class="p">)</span>     <span class="c1"># columns</span>
<span class="k">del</span><span class="p">(</span><span class="n">cn_test</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>View and search the CNDF dataframe to select modules and layers of interest.</p>

<pre><code>cn.view()
cn.search('conv2d')</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Additional methods:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ConvNav.head" class="doc_header"><code>ConvNav.head</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Print <code>model</code> head summary info and modules</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ConvNav.body" class="doc_header"><code>ConvNav.body</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Print <code>model</code> body summary info and modules</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ConvNav.divs" class="doc_header"><code>ConvNav.divs</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Print Summary information from <code>model</code> head and body</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ConvNav.dim_transitions" class="doc_header"><code>ConvNav.dim_transitions</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Finds layers with different input and output dimensions. These are useful points to apply hooks and callbacks for investigating model activity.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ConvNav.linear_layers" class="doc_header"><code>ConvNav.linear_layers</code><a href="" class="source_link" style="float:right">[source]</a></h4><p>Prints and returns all linear layers in the <code>model</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Saving-and-reloading-CNDF-dataframes.">Saving and reloading CNDF dataframes.<a class="anchor-link" href="#Saving-and-reloading-CNDF-dataframes.">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_cndf" class="doc_header"><code>save_cndf</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L516" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_cndf</code>(<strong><code>cn</code></strong>, <strong><code>filename</code></strong>, <strong><code>path</code></strong>=<em><code>''</code></em>, <strong><code>with_modules</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Saves a CNDF dataframe of the ConvNav instance <code>cn</code> to persistent storage at <code>path</code> with <code>filename</code> gzip compresseed</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In native format, CNDF dataframes include the module objetcs in a 'lyr_obj' column and so can be quite large, 100-200mb for a complex model such as a densenet or xresnet. Thus, by default, module objects are removed from the dataframe before saving. To save the model objects as well, check you have enough space in the download location and set <code>with_modules</code> to True. Dataframes are gzip compressed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_cndf" class="doc_header"><code>load_cndf</code><a href="https://github.com/hallmx/fa_convnav/tree/master/fa_convnav/navigator.py#L523" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_cndf</code>(<strong><code>filename</code></strong>, <strong><code>path</code></strong>=<em><code>''</code></em>)</p>
</blockquote>
<p>Loads a CNDF dataframe from persistent storage at <code>path</code>+<code>filename</code> and unzips it</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

